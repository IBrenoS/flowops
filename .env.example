# ─────────────────────────────────────────────────────────────────────────────
# FlowOps — Variáveis de Ambiente
# Copie este arquivo para .env e preencha os valores
# NUNCA commite o arquivo .env no repositório
# ─────────────────────────────────────────────────────────────────────────────

# ── DATABASE ──────────────────────────────────────────────────────────────────
# PostgreSQL connection string
# Local: postgresql://postgres:postgres@localhost:5432/flowops
# Railway: fornecido automaticamente no painel
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/flowops

# ── REDIS ─────────────────────────────────────────────────────────────────────
# Usado pelo BullMQ para filas de processamento
# Local: redis://localhost:6379
# Railway: fornecido automaticamente no painel
REDIS_URL=redis://localhost:6379

# ── OPENAI ────────────────────────────────────────────────────────────────────
# Chave da API OpenAI — nunca exponha no frontend
# Obtenha em: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-...

# Modelo usado para extração de pedidos (não altere sem testar)
OPENAI_MODEL=gpt-4o-mini

# Modelo usado para transcrição de áudio
OPENAI_WHISPER_MODEL=whisper-1

# ── EVOLUTION API ─────────────────────────────────────────────────────────────
# Infraestrutura de WhatsApp gerenciada pelo FlowOps
# URL da instância do servidor Evolution API (interno)
EVOLUTION_API_URL=https://evolution.flowops.internal

# Chave de autenticação do servidor Evolution API
EVOLUTION_API_KEY=your-evolution-api-key

# URL pública onde o FlowOps recebe os webhooks do WhatsApp
# Deve ser acessível publicamente (use ngrok em dev)
WEBHOOK_BASE_URL=https://your-ngrok-or-domain.com

# ── JWT ───────────────────────────────────────────────────────────────────────
# Secret para assinar tokens JWT — use uma string longa e aleatória
# Gere com: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# Tempo de expiração do token de acesso
JWT_EXPIRES_IN=7d

# ── BLING ERP ─────────────────────────────────────────────────────────────────
# Credenciais OAuth2 do Bling v3
# Obtenha em: https://developer.bling.com.br
BLING_CLIENT_ID=your-bling-client-id
BLING_CLIENT_SECRET=your-bling-client-secret

# ── OMIE ERP ──────────────────────────────────────────────────────────────────
# Credenciais da API Omie
# Obtenha em: https://developer.omie.com.br
OMIE_APP_KEY=your-omie-app-key
OMIE_APP_SECRET=your-omie-app-secret

# ── TINY ERP ──────────────────────────────────────────────────────────────────
# Token de API do Tiny ERP
# Obtenha em: painel do Tiny → Integrações → API
TINY_TOKEN=your-tiny-token

# ── APP ───────────────────────────────────────────────────────────────────────
NODE_ENV=development

# Porta do servidor API
PORT=3001

# URL do frontend (usado em CORS e redirecionamentos)
FRONTEND_URL=http://localhost:3000

# Nível de log: 'fatal' | 'error' | 'warn' | 'info' | 'debug' | 'trace'
LOG_LEVEL=info

# ── SEGURANÇA ─────────────────────────────────────────────────────────────────
# Chave para criptografar tokens dos ERPs no banco
# Gere com: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-32-byte-hex-encryption-key

# ── RATE LIMITING ─────────────────────────────────────────────────────────────
# Máximo de requisições por minuto por IP (padrão: 100)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
